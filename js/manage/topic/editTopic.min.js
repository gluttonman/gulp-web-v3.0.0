function initBusiness(){$.ajax({type:"post",async:!1,data:{id:topic_id},dataType:"json",url:url_path_html+"/yx/topic/findTopicById?r="+(new Date).getTime(),success:function(t){var e=t.list;$("#title").val(e.title),$("#content").val(e.content),$("#sel_stage").val(e.stage_id),getSubjectList(e.stage_id),$("#sel_subject").val(e.subject_id),$("#lx_id").val(e.lx_id)}})}function initTopicType(){var t=url_path_html+"/yx/topic/topiclxList";dataRenderSync(null,t,"topic_lx","topic_lx_script","get")}function topicSubmit(){var lx_id=$("#lx_id").find("option:selected").val(),lx_name=$("#lx_id").find("option:selected").text(),stage_id=$("#sel_stage").val(),subject_id=$("#sel_subject").val(),stage_name=$("#sel_stage").find("option:selected").text(),subject_name=$("#sel_subject").find("option:selected").text(),title=$("#title").val();if(""==$.trim(title)||title.length>30)return art.dialog.alert("专题名称字数1-30！"),!1;var content=$("#content").val();if(content.length>300)return art.dialog.alert("专题导读0-300字符！"),!1;var submitUrl=url_path_html+"/yx/topic/save",data={id:topic_id,lx_id:lx_id,lx_name:lx_name,stage_id:stage_id,subject_id:subject_id,stage_name:stage_name,subject_name:subject_name,title:title,content:content,business_type:business_type,business_id:business_id,method:"add"};topic_id>0&&(data.method="edit"),$.ajax({type:"post",data:data,url:submitUrl,dataType:"json",success:function(data){data.success&&(dialogClose(0==topic_id?"添加成功！":"修改成功！",3,200,""),setTimeout(function(){if(null!=callBack){var fun="parent."+callBack+"()";eval(fun)}cannel()},2e3))}})}function cannel(){"undefined"!=typeof parent.tb_remove&&parent.tb_remove()}var business_type=2,business_id=1,topic_id=0,callBack=null;$(document).ready(function(){undefined!=$.cookie("person_id")&&"null"!=$.cookie("person_id")&&5==$.cookie("identity_id")?(null!=GetQueryString("business_type")&&null!=GetQueryString("business_id")&&(business_type=GetQueryString("business_type"),business_id=GetQueryString("business_id")),null!=GetQueryString("callBack")&&(callBack=GetQueryString("callBack")),initSelectStageSubject($.cookie("background_stage_id"),$.cookie("background_subject_id")),initTopicType(),null!=GetQueryString("id")&&(topic_id=GetQueryString("id")),topic_id>0&&initBusiness()):alert("未登录")});