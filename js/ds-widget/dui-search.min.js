!function(e){var t;e.widget("dui.search",{options:{inputclass:"form-control",inputwidth:"200px",maxinput:20,tips:"请输入关键字",btnval:"搜索",btnclass:"btn btn-warning l5",onsearch:null,value:""},_create:function(){t=this,this.element.append("<div class='_idiv' style='display:inline-block;position:relative'>"),this.changer=e("<input>",{type:"text","class":this.options.inputclass,id:"search_keyword",placeholder:this.options.tips,width:this.options.inputwidth,maxlength:this.options.maxinput}),e(this.element).find("._idiv").append(this.changer),e("#search_keyword").css("padding-right","20px"),this._on(this.changer,{keydown:"onsearch",keyup:this._delshow,paste:this._paste}),this.changer=e("<span>",{"class":"glyphicon glyphicon-remove search_cha abso search_del"}).appendTo("._idiv"),this._on(this.changer,{click:this._clear}),this.changer=e("<input>",{type:"button",value:this.options.btnval,"class":this.options.btnclass}).appendTo(this.element),this._on(this.changer,{click:this._search})},_delshow:function(){var t=e("#search_keyword").val();new RegExp("[^一-龥^a-z^A-Z^0-9]").test(t)?(t=(t=t.replace(/[^\u4E00-\u9FA5^a-z^A-Z^0-9]/g,"")).replace(/\^/g,""),e("#search_keyword").val(t)):t.indexOf("^")>0&&(t=(t=t.replace(/[^\u4E00-\u9FA5^a-z^A-Z^0-9]/g,"")).replace(/\^/g,""),e("#search_keyword").val(t)),t.length>0?e(".search_del").show():e(".search_del").hide()},_clear:function(){e("#search_keyword").val(""),e("#search_keyword").focus(),e(".search_del").hide(),this.options.onsearch()},_search:function(){this.options.onsearch()},_paste:function(e){undefined;""!=(window.clipboardData&&window.clipboardData.getData?window.clipboardData.getData("Text"):e.originalEvent.clipboardData.getData("Text"))&&setTimeout(function(){t._delshow()})},_destroy:function(){t.element.empty()},onsearch:function(e){13==e.keyCode&&(e.returnValue=!1,e.cancel=!0,this.options.onsearch())},value:function(){return this.options.value=e("#search_keyword").val(),this.options.value},clear:function(){e("#search_keyword").val(""),e(".search_del").hide()},init:function(t){var a=t.replace(/[^\u4E00-\u9FA5^a-z^A-Z^0-9]/g,"");a=a.replace(/\^/g,""),e("#search_keyword").val(a),this._delshow()}})}(jQuery);