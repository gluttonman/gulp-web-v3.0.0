!function(e,i,o){function s(){r=i[p](function(){d.each(function(){var i=e(this),t=i.width(),o=i.height(),s=e.data(this,h);t===s.w&&o===s.h||i.trigger(c,[s.w=t,s.h=o])}),s()},l[f])}var a=function(i,o){var s=this;s.options=o,s.sliderContent=i,s.sliderInner=s.sliderContent.html(),s.sliderContent.html("<div class='iviewSlider'>"+s.sliderInner+"</div>"),s.slider=e(".iviewSlider",s.sliderContent),s.slider.css("position","relative"),s.defs={slide:0,total:0,image:"",images:[],width:s.sliderContent.width(),height:s.sliderContent.height(),timer:o.timer.toLowerCase(),lock:!1,paused:!o.autoAdvance,time:o.pauseTime,easing:o.easing},s.disableSelection(s.slider[0]),s.slides=s.slider.children(),s.slides.each(function(i){var t=e(this);if(s.defs.images.push(t.data("iview:image")),t.data("iview:thumbnail")&&s.defs.images.push(t.data("iview:thumbnail")),t.css("display","none"),"video"==t.data("iview:type")){var a=t.children().eq(0),n=e('<div class="iview-video-show"><div class="iview-video-container"><a class="iview-video-close" title="'+o.closeLabel+'">&#735;</a></div></div>');t.append(n),a.appendTo(e("div.iview-video-container",n)),n.css({width:s.defs.width,height:s.defs.height,top:"-"+s.defs.height+"px"}).hide(),t.addClass("iview-video").css({cursor:"pointer"})}s.defs.total++}).css({width:s.defs.width,height:s.defs.height}),s.sliderContent.append('<div id="iview-preloader"><div></div></div>');var a=e("#iview-preloader",s.sliderContent),r=e("div",a);a.css({top:s.defs.height/2-a.height()/2+"px",left:s.defs.width/2-a.width()/2+"px"}),s.sliderContent.append('<div id="iview-timer"><div></div></div>'),s.iviewTimer=e("#iview-timer",s.sliderContent),s.iviewTimer.hide(),e(".iview-caption",s.slider).each(function(i){var t=e(this);t.html('<div class="caption-contain">'+t.html()+"</div>")}),o.startSlide=o.randomStart?Math.floor(Math.random()*s.defs.total):o.startSlide,o.startSlide=o.startSlide>0&&o.startSlide>=s.defs.total?s.defs.total-1:o.startSlide,s.defs.slide=o.startSlide,s.defs.image=s.slides.eq(s.defs.slide),s.defs.time=s.defs.image.data("iview:pausetime")?s.defs.image.data("iview:pausetime"):o.pauseTime,s.defs.easing=s.defs.image.data("iview:easing")?s.defs.image.data("iview:easing"):o.easing,s.pieDegree=0;var d=o.timerPadding,l=o.timerDiameter,p=o.timerStroke;if(s.defs.total>1&&"bar"!=s.defs.timer){p="360bar"==s.defs.timer?o.timerStroke:0;var c=l+2*d+2*p,h=c,f=Raphael(s.iviewTimer[0],c,h);s.R=l/2;var v={stroke:o.timerBg,"stroke-width":p+2*d},m={stroke:o.timerColor,"stroke-width":p,"stroke-linecap":"round"},u={fill:o.timerColor,stroke:"none","stroke-width":0},g={fill:o.timerBg,stroke:"none","stroke-width":0};f.customAttributes.arc=function(e,i){var t,o=1*e,s=(90-o)*Math.PI/180,a=l/2+d+p,n=l/2+d+p,r=a+i*Math.cos(s),c=n-i*Math.sin(s);return t=360==e?[["M",a,n-i],["A",i,i,0,1,1,299.99,n-i]]:[["M",a,n-i],["A",i,i,0,+(o>180),1,r,c]],{path:t}},f.customAttributes.segment=function(e,i){var t=-90;i-=1;var o=(e=t+e)-t>180,s=l/2+d,a=l/2+d;return t=t%360*Math.PI/180,e=e%360*Math.PI/180,{path:[["M",s,a],["l",i*Math.cos(t),i*Math.sin(t)],["A",i,i,0,+o,1,s+i*Math.cos(e),a+i*Math.sin(e)],["z"]]}},s.defs.total>1&&"pie"==s.defs.timer&&f.circle(s.R+d,s.R+d,s.R+d-1).attr(g),s.timerBgPath=f.path().attr(v),s.timerPath=f.path().attr(m),s.pieTimer=f.path().attr(u)}s.barTimer=e("div",s.iviewTimer),s.defs.total>1&&"360bar"==s.defs.timer&&s.timerBgPath.attr({arc:[359.9,s.R]}),"bar"==s.defs.timer?(s.iviewTimer.css({opacity:o.timerOpacity,width:l,height:p,border:o.timerBarStroke+"px "+o.timerBarStrokeColor+" "+o.timerBarStrokeStyle,padding:d,background:o.timerBg}),s.barTimer.css({width:0,height:p,background:o.timerColor,"float":"left"})):s.iviewTimer.css({opacity:o.timerOpacity,width:c,height:h}),s.setTimerPosition(),new n(s.defs.images,function(e){var i=10*e;r.stop().animate({width:i+"%"})},function(){r.stop().animate({width:"100%"},function(){a.remove(),s.startSlider(),o.onAfterLoad.call(this)})}),s.sliderContent.bind("swipeleft",function(){if(s.defs.lock)return!1;s.cleanTimer(),s.goTo("next")}).bind("swiperight",function(){if(s.defs.lock)return!1;s.cleanTimer(),s.defs.slide-=2,s.goTo("prev")}),o.keyboardNav&&e(document).bind("keyup.iView",function(e){if("37"==e.keyCode){if(s.defs.lock)return!1;s.cleanTimer(),s.defs.slide-=2,s.goTo("prev")}if("39"==e.keyCode){if(s.defs.lock)return!1;s.cleanTimer(),s.goTo("next")}}),s.iviewTimer.live("click",function(){s.iviewTimer.hasClass("paused")?s.playSlider():s.stopSlider()}),s.sliderContent.bind("iView:pause",function(){s.stopSlider()}),s.sliderContent.bind("iView:play",function(){s.playSlider()}),s.sliderContent.bind("iView:previous",function(){if(s.defs.lock)return!1;s.cleanTimer(),s.defs.slide-=2,s.goTo("prev")}),s.sliderContent.bind("iView:next",function(){if(s.defs.lock)return!1;s.cleanTimer(),s.goTo("next")}),s.sliderContent.bind("iView:goSlide",function(i,t){return!s.defs.lock&&s.defs.slide!=t&&(!e(this).hasClass("active")&&(s.cleanTimer(),s.slider.css("background",'url("'+s.defs.image.data("iview:image")+'") no-repeat'),s.defs.slide=t-1,void s.goTo("control")))}),s.sliderContent.bind("resize",function(){if(t=e(this),tW=t.width(),tH=t.height(),c=s.slider.width(),h=s.slider.height(),s.defs.width!=tW){var i=tW/c,o=Math.round(s.defs.height*i);s.slider.css({"-webkit-transform-origin":"0 0","-moz-transform-origin":"0 0","-o-transform-origin":"0 0","-ms-transform-origin":"0 0","transform-origin":"0 0","-webkit-transform":"scale("+i+")","-moz-transform":"scale("+i+")","-o-transform":"scale("+i+")","-ms-transform":"scale("+i+")",transform:"scale("+i+")"}),t.css({height:o}),s.defs.width=tW,s.setTimerPosition()}}),e(".iview-video",s.slider).click(function(i){var t=e(this),o=e(".iview-video-show",t);e(i.target).hasClass("iview-video-close")||e(i.target).hasClass("iview-caption")||e(i.target).parents().hasClass("iview-caption")||(o.show().animate({top:0},1e3,"easeOutBounce"),s.sliderContent.trigger("iView:pause"))}),e(".iview-video-close",s.slider).click(function(){var i=e(this).parents(".iview-video-show"),t=e("iframe",i),o=t.attr("src");t.removeAttr("src").attr("src",o),i.animate({top:"-"+s.defs.height+"px"},1e3,"easeOutBounce",function(){i.hide(),s.sliderContent.trigger("iView:play")})})};a.prototype={timer:null,startSlider:function(){var i=this,t=new Image;if(t.src=i.slides.eq(0).data("iview:image"),imgWidth=t.width,imgWidth!=i.defs.width&&(i.defs.width=imgWidth,i.sliderContent.trigger("resize")),i.iviewTimer.show(),i.slides.eq(i.defs.slide).css("display","block"),i.slider.css("background",'url("'+i.defs.image.data("iview:image")+'") no-repeat'),i.setCaption(i.options),i.iviewTimer.addClass("paused").attr("title",i.options.playLabel),i.options.autoAdvance&&i.defs.total>1&&(i.iviewTimer.removeClass("paused").attr("title",i.options.pauseLabel),i.setTimer()),i.options.directionNav&&(i.sliderContent.append('<div class="iview-directionNav"><a class="iview-prevNav" title="'+i.options.previousLabel+'">'+i.options.previousLabel+'</a><a class="iview-nextNav" title="'+i.options.nextLabel+'">'+i.options.nextLabel+"</a></div>"),e(".iview-directionNav",i.sliderContent).css({opacity:i.options.directionNavHoverOpacity}),i.sliderContent.hover(function(){e(".iview-directionNav",i.sliderContent).stop().animate({opacity:1},300)},function(){e(".iview-directionNav",i.sliderContent).stop().animate({opacity:i.options.directionNavHoverOpacity},300)}),e("a.iview-prevNav",i.sliderContent).live("click",function(){if(i.defs.lock)return!1;i.cleanTimer(),i.defs.slide-=2,i.goTo("prev")}),e("a.iview-nextNav",i.sliderContent).live("click",function(){if(i.defs.lock)return!1;i.cleanTimer(),i.goTo("next")})),i.options.controlNav){var o='<div class="iview-controlNav">',s="";!i.options.directionNav&&i.options.controlNavNextPrev&&(o+='<a class="iview-controlPrevNav" title="'+i.options.previousLabel+'">'+i.options.previousLabel+"</a>"),o+='<div class="iview-items"><ul>';for(var a=0;a<i.defs.total;a++){var n=i.slides.eq(a);if(o+="<li>",i.options.controlNavThumbs)o+='<a class="iview-control" rel="'+a+'"><img src="'+(r=n.data("iview:thumbnail")?n.data("iview:thumbnail"):n.data("iview:image"))+'" /></a>';else{var r=n.data("iview:thumbnail")?n.data("iview:thumbnail"):n.data("iview:image");o+='<a class="iview-control" rel="'+a+'">'+(a+1)+"</a>",i.options.controlNavTooltip&&(s+='<div rel="'+a+'"><img src="'+r+'" /></div>')}o+="</li>"}o+="</ul></div>",!i.options.directionNav&&i.options.controlNavNextPrev&&(o+='<a class="iview-controlNextNav" title="'+i.options.nextLabel+'">'+i.options.nextLabel+"</a>"),o+="</div>",!i.options.controlNavThumbs&&i.options.controlNavTooltip&&(o+='<div id="iview-tooltip"><div class="holder"><div class="container">'+s+"</div></div></div>"),i.sliderContent.append(o),e(".iview-controlNav a.iview-control:eq("+i.defs.slide+")",i.sliderContent).addClass("active"),e("a.iview-controlPrevNav",i.sliderContent).live("click",function(){if(i.defs.lock)return!1;i.cleanTimer(),i.defs.slide-=2,i.goTo("prev")}),e("a.iview-controlNextNav",i.sliderContent).live("click",function(){if(i.defs.lock)return!1;i.cleanTimer(),i.goTo("next")}),e(".iview-controlNav a.iview-control",i.sliderContent).live("click",function(){return!i.defs.lock&&(!e(this).hasClass("active")&&(i.cleanTimer(),i.slider.css("background",'url("'+i.defs.image.data("iview:image")+'") no-repeat'),i.defs.slide=e(this).attr("rel")-1,void i.goTo("control")))}),e(".iview-controlNav",i.sliderContent).css({opacity:i.options.controlNavHoverOpacity}),i.sliderContent.hover(function(){e(".iview-controlNav",i.sliderContent).stop().animate({opacity:1},300),i.sliderContent.addClass("iview-hover")},function(){e(".iview-controlNav",i.sliderContent).stop().animate({opacity:i.options.controlNavHoverOpacity},300),i.sliderContent.removeClass("iview-hover")});var d=null;e(".iview-controlNav a.iview-control",i.sliderContent).hover(function(t){var o=e(this),s=o.attr("rel"),a=e("#iview-tooltip",i.sliderContent),n=e("div.holder",a),r=o.offset().left-i.sliderContent.offset().left-a.outerWidth()/2+i.options.tooltipX,l=o.offset().top-i.sliderContent.offset().top-a.outerHeight()+i.options.tooltipY,p=e("div[rel="+s+"]");scrollLeft=s*p.width(),a.stop().animate({left:r,top:l,opacity:1},300),a.not(":visible")&&a.fadeIn(300),n.stop().animate({scrollLeft:scrollLeft},300),clearTimeout(d)},function(t){var o=e("#iview-tooltip",i.sliderContent);d=setTimeout(function(){o.animate({opacity:0},300,function(){o.hide()})},200)})}i.sliderContent.bind("mouseover.iView mousemove.iView",function(){i.options.pauseOnHover&&!i.defs.paused&&i.cleanTimer(),i.sliderContent.addClass("iview-hover")}).bind("mouseout.iView",function(){i.options.pauseOnHover&&!i.defs.paused&&null==i.timer&&i.pieDegree<=359&&i.options.autoAdvance&&i.setTimer(),i.sliderContent.removeClass("iview-hover")})},setCaption:function(){var i=this,t=i.slides.eq(i.defs.slide),o=0;e(".iview-caption",t).each(function(t){var s=e(this),a=s.data("transition")?e.trim(s.data("transition").toLowerCase()):"fade",n=s.data("speed")?s.data("speed"):i.options.captionSpeed,r=s.data("easing")?s.data("easing"):i.options.captionEasing,d="undefined"!=s.data("x")?s.data("x"):"center",l="undefined"!=s.data("y")?s.data("y"):"center",p=s.data("width")?s.data("width"):s.width(),c=s.data("height")?s.data("height"):s.height(),h=s.outerWidth(),f=s.outerHeight();"center"==d&&(d=i.defs.width/2-h/2),"center"==l&&(l=i.defs.height/2-f/2);var v=e(".caption-contain",s);switch(s.css({opacity:0}),v.css({opacity:0,position:"relative",width:p,height:c}),a){case"wipedown":s.css({top:l-c,left:d}),v.css({top:c+3*c,left:0});break;case"wipeup":s.css({top:l+c,left:d}),v.css({top:c-3*c,left:0});break;case"wiperight":s.css({top:l,left:d-p}),v.css({top:0,left:p+2*p});break;case"wipeleft":s.css({top:l,left:d+p}),v.css({top:0,left:p-2*p});break;case"fade":s.css({top:l,left:d}),v.css({top:0,left:0});break;case"expanddown":s.css({top:l,left:d,height:0}),v.css({top:c+3*c,left:0});break;case"expandup":s.css({top:l+c,left:d,height:0}),v.css({top:c-3*c,left:0});break;case"expandright":s.css({top:l,left:d,width:0}),v.css({top:0,left:p+2*p});break;case"expandleft":s.css({top:l,left:d+p,width:0}),v.css({top:0,left:p-2*p})}setTimeout(function(){s.animate({opacity:i.options.captionOpacity,top:l,left:d,width:p,height:c},n,r,function(){})},o),setTimeout(function(){v.animate({opacity:i.options.captionOpacity,top:0,left:0},n,r)},o+100),o+=250})},processTimer:function(){var e=this;if("360bar"==e.defs.timer){i=0==e.pieDegree?0:e.pieDegree+.9;e.timerPath.attr({arc:[i,e.R]})}else if("pie"==e.defs.timer){var i=0==e.pieDegree?0:e.pieDegree+.9;e.pieTimer.attr({segment:[i,e.R]})}else e.barTimer.css({width:e.pieDegree/360*100+"%"});e.pieDegree+=3},transitionEnd:function(i){i.options.onAfterChange.call(this),i.defs.lock=!1,i.slides.css("display","none"),i.slides.eq(i.defs.slide).show(),i.slider.css("background",'url("'+i.defs.image.data("iview:image")+'") no-repeat'),e(".iview-strip, .iview-block",i.slider).remove(),i.defs.time=i.defs.image.data("iview:pausetime")?i.defs.image.data("iview:pausetime"):i.options.pauseTime,i.iviewTimer.animate({opacity:i.options.timerOpacity}),i.pieDegree=0,i.processTimer(),i.setCaption(i.options),null!=i.timer||i.defs.paused||(i.timer=setInterval(function(){i.timerCall(i)},i.defs.time/120))},addStrips:function(i,t){var o=this;t=t||o.options;for(var s=0;s<t.strips;s++){var a=Math.round(o.slider.width()/t.strips),n=Math.round(o.slider.height()/t.strips),r="-"+(a+s*a-a)+"px 0%",d=i?n*s+"px":"0px",l=i?"0px":a*s+"px";if(i&&(r="0% -"+(n+s*n-n)+"px"),s==t.strips-1)var p=i?"0px":o.slider.width()-a*s+"px",c=i?o.slider.height()-n*s+"px":"0px";else var p=i?"0px":a+"px",c=i?n+"px":"0px";var h=e('<div class="iview-strip"></div>').css({width:p,height:c,top:d,left:l,background:'url("'+o.defs.image.data("iview:image")+'") no-repeat '+r,opacity:0});o.slider.append(h)}},addBlocks:function(){for(var i=this,t=Math.round(i.slider.width()/i.options.blockCols),o=Math.round(i.slider.height()/i.options.blockRows),s=0;s<i.options.blockRows;s++)for(var a=0;a<i.options.blockCols;a++){var n="-"+(t+a*t-t)+"px -"+(o+s*o-o)+"px";a==i.options.blockCols-1&&i.slider.width()-t*a+"px";var r=e('<div class="iview-block"></div>').css({width:t+"px",height:o+"px",top:s*o+"px",left:a*t+"px",background:'url("'+i.defs.image.data("iview:image")+'") no-repeat '+n,opacity:0});i.slider.append(r)}},runTransition:function(i){var t=this;switch(i){case"strip-up-right":case"strip-up-left":t.addStrips();o=0;s=0,a=e(".iview-strip",t.slider),"strip-up-left"==i&&(a=e(".iview-strip",t.slider).reverse()),a.each(function(){var i=e(this);i.css({top:"",bottom:"0px"}),setTimeout(function(){i.animate({height:"100%",opacity:"1.0"},t.options.animationSpeed,t.defs.easing,function(){s==t.options.strips-1&&t.transitionEnd(t),s++})},100+o),o+=50});break;case"strip-down":case"strip-down-right":case"strip-down-left":t.addStrips();var o=0,s=0,a=e(".iview-strip",t.slider);"strip-down-left"==i&&(a=e(".iview-strip",t.slider).reverse()),a.each(function(){var i=e(this);i.css({bottom:"",top:"0px"}),setTimeout(function(){i.animate({height:"100%",opacity:"1.0"},t.options.animationSpeed,t.defs.easing,function(){s==t.options.strips-1&&t.transitionEnd(t),s++})},100+o),o+=50});break;case"strip-left-right":case"strip-left-right-up":case"strip-left-right-down":t.addStrips(!0);var o=0,s=0,n=0,a=e(".iview-strip",t.slider);"strip-left-right-down"==i&&(a=e(".iview-strip",t.slider).reverse()),a.each(function(){var i=e(this);0==s?(i.css({right:"",left:"0px"}),s++):(i.css({left:"",right:"0px"}),s=0),setTimeout(function(){i.animate({width:"100%",opacity:"1.0"},t.options.animationSpeed,t.defs.easing,function(){n==t.options.strips-1&&t.transitionEnd(t),n++})},100+o),o+=50});break;case"strip-up-down":case"strip-up-down-right":case"strip-up-down-left":t.addStrips();var o=0,s=0,n=0,a=e(".iview-strip",t.slider);"strip-up-down-left"==i&&(a=e(".iview-strip",t.slider).reverse()),a.each(function(){var i=e(this);0==s?(i.css({bottom:"",top:"0px"}),s++):(i.css({top:"",bottom:"0px"}),s=0),setTimeout(function(){i.animate({height:"100%",opacity:"1.0"},t.options.animationSpeed,t.defs.easing,function(){n==t.options.strips-1&&t.transitionEnd(t),n++})},100+o),o+=50});break;case"left-curtain":case"right-curtain":case"top-curtain":case"bottom-curtain":"left-curtain"==i||"right-curtain"==i?t.addStrips():t.addStrips(!0);var o=0,s=0,a=e(".iview-strip",t.slider);"right-curtain"!=i&&"bottom-curtain"!=i||(a=e(".iview-strip",t.slider).reverse()),a.each(function(){var a=e(this),n=a.width(),r=a.height();"left-curtain"==i||"right-curtain"==i?a.css({top:"0px",height:"100%",width:"0px"}):a.css({left:"0px",height:"0px",width:"100%"}),setTimeout(function(){"left-curtain"==i||"right-curtain"==i?a.animate({width:n,opacity:"1.0"},t.options.animationSpeed,t.defs.easing,function(){s==t.options.strips-1&&t.transitionEnd(t),s++}):a.animate({height:r,opacity:"1.0"},t.options.animationSpeed,t.defs.easing,function(){s==t.options.strips-1&&t.transitionEnd(t),s++})},100+o),o+=50});break;case"strip-up-right":case"strip-up-left":t.addStrips();var o=0,s=0,a=e(".iview-strip",t.slider);"strip-up-left"==i&&(a=e(".iview-strip",t.slider).reverse()),a.each(function(){var i=e(this);i.css({bottom:"0px"}),setTimeout(function(){i.animate({height:"100%",opacity:"1.0"},t.options.animationSpeed,t.defs.easing,function(){s==t.options.strips-1&&t.transitionEnd(t),s++})},100+o),o+=50});break;case"strip-left-fade":case"strip-right-fade":case"strip-top-fade":case"strip-bottom-fade":"strip-left-fade"==i||"strip-right-fade"==i?t.addStrips():t.addStrips(!0);var o=0,s=0,a=e(".iview-strip",t.slider);"strip-right-fade"!=i&&"strip-bottom-fade"!=i||(a=e(".iview-strip",t.slider).reverse()),a.each(function(){var a=e(this),n=a.width(),r=a.height();"strip-left-fade"==i||"strip-right-fade"==i?a.css({top:"0px",height:"100%",width:n}):a.css({left:"0px",height:r,width:"100%"}),setTimeout(function(){a.animate({opacity:"1.0"},1.7*t.options.animationSpeed,t.defs.easing,function(){s==t.options.strips-1&&t.transitionEnd(t),s++})},100+o),o+=35});break;case"slide-in-up":case"slide-in-down":opts={strips:1},t.addStrips(!1,opts);var r=e(".iview-strip:first",t.slider),d=0;d="slide-in-up"==i?"-"+t.defs.height+"px":t.defs.height+"px",r.css({top:d,height:"100%",width:t.defs.width}),r.animate({top:"0px",opacity:1},2*t.options.animationSpeed,t.defs.easing,function(){t.transitionEnd(t)});break;case"zigzag-top":case"zigzag-bottom":case"zigzag-grow-top":case"zigzag-grow-bottom":case"zigzag-drop-top":case"zigzag-drop-bottom":t.addBlocks();for(var l=t.options.blockCols*t.options.blockRows,o=0,p=new Array,c=e(".iview-block",t.slider),h=0;h<t.options.blockRows;h++){var f=h%2,v=h*t.options.blockCols,m=(h+1)*t.options.blockCols;if(1==f)for(w=m-1;w>=v;w--)p.push(e(c[w]));else for(w=v;w<m;w++)p.push(e(c[w]))}"zigzag-bottom"!=i&&"zigzag-grow-bottom"!=i&&"zigzag-drop-bottom"!=i||p.reverse(),c.each(function(s){var a=e(p[s]),n=a.height(),r=a.width(),d=a.css("top");"zigzag-grow-top"==i||"zigzag-grow-bottom"==i?a.width(0).height(0):"zigzag-drop-top"!=i&&"zigzag-drop-bottom"!=i||a.css({top:"-=50"}),setTimeout(function(){"zigzag-grow-top"==i||"zigzag-grow-bottom"==i?a.animate({opacity:"1",height:n,width:r},t.options.animationSpeed,t.defs.easing,function(){s==l-1&&t.transitionEnd(t)}):"zigzag-drop-top"==i||"zigzag-drop-bottom"==i?a.animate({top:d,opacity:"1"},t.options.animationSpeed,t.defs.easing,function(){s==l-1&&t.transitionEnd(t)}):a.animate({opacity:"1"},2*t.options.animationSpeed,"easeInOutExpo",function(){s==l-1&&t.transitionEnd(t)})},100+o),o+=20});break;case"block-fade":case"block-fade-reverse":case"block-expand":case"block-expand-reverse":t.addBlocks();var l=t.options.blockCols*t.options.blockRows,s=0,o=0,u=0,g=0;(p=new Array)[u]=new Array;c=e(".iview-block",t.slider);"block-fade-reverse"!=i&&"block-expand-reverse"!=i||(c=e(".iview-block",t.slider).reverse()),c.each(function(){p[u][g]=e(this),++g==t.options.blockCols&&(g=0,p[++u]=new Array)});for(var w=0;w<2*t.options.blockCols;w++){for(var b=w,h=0;h<t.options.blockRows;h++)b>=0&&b<t.options.blockCols&&function(){var a=e(p[h][b]),n=a.width(),r=a.height();"block-expand"!=i&&"block-expand-reverse"!=i||a.width(0).height(0),setTimeout(function(){a.animate({opacity:"1",width:n,height:r},t.options.animationSpeed/1.3,t.defs.easing,function(){s==l-1&&t.transitionEnd(t),s++})},100+o)}(),b--;o+=100}break;case"block-random":case"block-expand-random":case"block-drop-random":t.addBlocks();var l=t.options.blockCols*t.options.blockRows,o=0;(c=t.shuffle(e(".iview-block",t.slider))).each(function(s){var a=e(this),n=a.height(),r=a.width(),d=a.css("top");"block-expand-random"==i&&a.width(0).height(0),"block-drop-random"==i&&a.css({top:"-=50"}),setTimeout(function(){a.animate({top:d,opacity:"1",height:n,width:r},t.options.animationSpeed,t.defs.easing,function(){s==l-1&&t.transitionEnd(t)})},100+o),o+=20});break;case"slide-in-right":case"slide-in-left":case"fade":default:opts={strips:1},t.addStrips(!1,opts),(r=e(".iview-strip:first",t.slider)).css({height:"100%",width:t.defs.width}),"slide-in-right"==i?r.css({height:"100%",width:t.defs.width,left:t.defs.width+"px",right:""}):"slide-in-left"==i&&r.css({left:"-"+t.defs.width+"px"}),r.animate({left:"0px",opacity:1},2*t.options.animationSpeed,t.defs.easing,function(){t.transitionEnd(t)})}},shuffle:function(e){for(var i=e.slice(),t=i.length,o=t;o--;){var s=parseInt(Math.random()*t),a=i[o];i[o]=i[s],i[s]=a}return i},timerCall:function(e){e.processTimer(),e.pieDegree>=360&&(e.cleanTimer(),e.goTo(!1))},setTimer:function(){var e=this;e.timer=setInterval(function(){e.timerCall(e)},e.defs.time/120)},cleanTimer:function(){var e=this;clearInterval(e.timer),e.timer=null},goTo:function(i){var t=this;t.defs&&t.defs.slide==t.defs.total-1&&t.options.onLastSlide.call(this),t.cleanTimer(),t.iviewTimer.animate({opacity:0}),t.options.onBeforeChange.call(this),i?"prev"!=i&&"next"!=i||t.slider.css("background",'url("'+t.defs.image.data("iview:image")+'") no-repeat'):t.slider.css("background",'url("'+t.defs.image.data("iview:image")+'") no-repeat'),++t.defs.slide==t.defs.total&&(t.defs.slide=0,t.options.onSlideShowEnd.call(this)),t.defs.slide<0&&(t.defs.slide=t.defs.total-1),t.defs.image=t.slides.eq(t.defs.slide),t.options.controlNav&&(e(".iview-controlNav a.iview-control",t.sliderContent).removeClass("active"),e(".iview-controlNav a.iview-control:eq("+t.defs.slide+")",t.sliderContent).addClass("active"));var s=t.options.fx;if("random"==t.options.fx.toLowerCase()&&((s=(a=new Array("left-curtain","right-curtain","top-curtain","bottom-curtain","strip-down-right","strip-down-left","strip-up-right","strip-up-left","strip-up-down","strip-up-down-left","strip-left-right","strip-left-right-down","slide-in-right","slide-in-left","slide-in-up","slide-in-down","fade","block-random","block-fade","block-fade-reverse","block-expand","block-expand-reverse","block-expand-random","zigzag-top","zigzag-bottom","zigzag-grow-top","zigzag-grow-bottom","zigzag-drop-top","zigzag-drop-bottom","strip-left-fade","strip-right-fade","strip-top-fade","strip-bottom-fade","block-drop-random"))[Math.floor(Math.random()*(a.length+1))])==o&&(s="fade"),s=e.trim(s.toLowerCase())),-1!=t.options.fx.indexOf(",")&&((s=(a=t.options.fx.split(","))[Math.floor(Math.random()*a.length)])==o&&(s="fade"),s=e.trim(s.toLowerCase())),t.defs.image.data("iview:transition")){var a=t.defs.image.data("iview:transition").split(",");s=a[Math.floor(Math.random()*a.length)],s=e.trim(s.toLowerCase())}t.defs.easing=t.defs.image.data("iview:easing")?t.defs.image.data("iview:easing"):t.options.easing,t.defs.lock=!0,t.runTransition(s)},playSlider:function(){var e=this;null==e.timer&&e.defs.paused&&(e.iviewTimer.removeClass("paused").attr("title",e.options.pauseLabel),e.setTimer(),e.defs.paused=!1,e.options.onPlay.call(this))},stopSlider:function(){var e=this;e.iviewTimer.addClass("paused").attr("title",e.options.playLabel),e.cleanTimer(),e.defs.paused=!0,e.options.onPause.call(this)},setTimerPosition:function(){for(var e=this,i=e.options.timerPosition.toLowerCase().split("-"),t=0;t<i.length;t++)"top"==i[t]?e.iviewTimer.css({top:e.options.timerY+"px",bottom:""}):"middle"==i[t]?e.iviewTimer.css({top:e.options.timerY+e.defs.height/2-e.options.timerDiameter/2+"px",bottom:""}):"bottom"==i[t]?e.iviewTimer.css({bottom:e.options.timerY+"px",top:""}):"left"==i[t]?e.iviewTimer.css({left:e.options.timerX+"px",right:""}):"center"==i[t]?e.iviewTimer.css({left:e.options.timerX+e.defs.width/2-e.options.timerDiameter/2+"px",right:""}):"right"==i[t]&&e.iviewTimer.css({right:e.options.timerX+"px",left:""})},disableSelection:function(e){"undefined"!=typeof e.onselectstart?e.onselectstart=function(){return!1}:"undefined"!=typeof e.style.MozUserSelect?e.style.MozUserSelect="none":"undefined"!=typeof e.style.webkitUserSelect?e.style.webkitUserSelect="none":"undefined"!=typeof e.style.userSelect?e.style.userSelect="none":e.onmousedown=function(){return!1},e.unselectable="on"},isTouch:function(){return!!("ontouchstart"in i)}};var n=function(e,i,t){this.m_pfnPercent=i,this.m_pfnFinished=t,this.m_nLoaded=0,this.m_nProcessed=0,this.m_aImages=new Array,this.m_nICount=e.length;for(var o=0;o<e.length;o++)this.Preload(e[o])};n.prototype={Preload:function(e){var i=new Image;this.m_aImages.push(i),i.onload=n.prototype.OnLoad,i.onerror=n.prototype.OnError,i.onabort=n.prototype.OnAbort,i.oImagePreload=this,i.bLoaded=!1,i.source=e,i.src=e},OnComplete:function(){++this.m_nProcessed==this.m_nICount?this.m_pfnFinished():this.m_pfnPercent(Math.round(this.m_nProcessed/this.m_nICount*10))},OnLoad:function(){this.bLoaded=!0,this.oImagePreload.m_nLoaded++,this.oImagePreload.OnComplete()},OnError:function(){this.bError=!0,this.oImagePreload.OnComplete()},OnAbort:function(){this.bAbort=!0,this.oImagePreload.OnComplete()}},e.fn.iView=function(i){i=jQuery.extend({fx:"random",easing:"easeOutQuad",strips:20,blockCols:10,blockRows:5,animationSpeed:500,pauseTime:5e3,startSlide:0,directionNav:!0,directionNavHoverOpacity:.6,controlNav:!1,controlNavNextPrev:!0,controlNavHoverOpacity:.6,controlNavThumbs:!1,controlNavTooltip:!0,captionSpeed:500,captionEasing:"easeInOutSine",captionOpacity:1,autoAdvance:!0,keyboardNav:!0,touchNav:!0,pauseOnHover:!1,nextLabel:"Next",previousLabel:"Previous",playLabel:"Play",pauseLabel:"Pause",closeLabel:"Close",randomStart:!1,timer:"Pie",timerBg:"#000",timerColor:"#EEE",timerOpacity:.5,timerDiameter:30,timerPadding:4,timerStroke:3,timerBarStroke:1,timerBarStrokeColor:"#EEE",timerBarStrokeStyle:"solid",timerPosition:"top-right",timerX:10,timerY:10,tooltipX:5,tooltipY:-5,onBeforeChange:function(){},onAfterChange:function(){},onAfterLoad:function(){},onLastSlide:function(){},onSlideShowEnd:function(){},onPause:function(){},onPlay:function(){}},i),e(this).each(function(){var t=e(this);new a(t,i)})},e.fn.reverse=[].reverse;var r,d=e([]),l=e.resize=e.extend(e.resize,{}),p="setTimeout",c="resize",h=c+"-special-event",f="delay";l[f]=250,l.throttleWindow=!0,e.event.special[c]={setup:function(){if(!l.throttleWindow&&this[p])return!1;var i=e(this);d=d.add(i),e.data(this,h,{w:i.width(),h:i.height()}),1===d.length&&s()},teardown:function(){if(!l.throttleWindow&&this[p])return!1;var i=e(this);d=d.not(i),i.removeData(h),d.length||clearTimeout(r)},add:function(i){function t(i,t,a){var n=e(this),r=e.data(this,h);r.w=t!==o?t:n.width(),r.h=a!==o?a:n.height(),s.apply(this,arguments)}if(!l.throttleWindow&&this[p])return!1;var s;if(e.isFunction(i))return s=i,t;s=i.handler,i.handler=t}};var v=!!("ontouchstart"in i),m=v?"touchstart":"mousedown",u=v?"touchend":"mouseup",g=v?"touchmove":"mousemove";e.event.special.swipe={scrollSupressionThreshold:10,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:75,setup:function(){var i=e(this);i.bind(m,function(t){function s(i){if(r){var t=i.originalEvent.touches?i.originalEvent.touches[0]:i;a={time:(new Date).getTime(),coords:[t.pageX,t.pageY]},Math.abs(r.coords[0]-a.coords[0])>e.event.special.swipe.scrollSupressionThreshold&&i.preventDefault()}}var a,n=t.originalEvent.touches?t.originalEvent.touches[0]:t,r={time:(new Date).getTime(),coords:[n.pageX,n.pageY],origin:e(t.target)};i.bind(g,s).one(u,function(t){i.unbind(g,s),r&&a&&a.time-r.time<e.event.special.swipe.durationThreshold&&Math.abs(r.coords[0]-a.coords[0])>e.event.special.swipe.horizontalDistanceThreshold&&Math.abs(r.coords[1]-a.coords[1])<e.event.special.swipe.verticalDistanceThreshold&&r.origin.trigger("swipe").trigger(r.coords[0]>a.coords[0]?"swipeleft":"swiperight"),r=a=o})})}},e.each({swipeleft:"swipe",swiperight:"swipe"},function(i,t){e.event.special[i]={setup:function(){e(this).bind(t,e.noop)}}})}(jQuery,this);